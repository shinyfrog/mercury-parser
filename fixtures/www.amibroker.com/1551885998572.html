<!doctype html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" value="text/html; charset=UTF-8">
<title>AmiBroker Knowledge Base &#xBB; Position sizing based on risk</title>
<meta name="generator" value="WordPress 5.0"> 

<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://www.amibroker.com/kb/feed/">
<link rel="alternate" type="text/xml" title="RSS .92" href="http://www.amibroker.com/kb/feed/rss/">
<link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="http://www.amibroker.com/kb/feed/atom/">
<link rel="pingback" href="http://www.amibroker.com/kb/xmlrpc.php">
<link rel="archives" title="October 2017" href="http://www.amibroker.com/kb/2017/10/">
<link rel="archives" title="June 2017" href="http://www.amibroker.com/kb/2017/06/">
<link rel="archives" title="May 2017" href="http://www.amibroker.com/kb/2017/05/">
<link rel="archives" title="November 2016" href="http://www.amibroker.com/kb/2016/11/">
<link rel="archives" title="April 2016" href="http://www.amibroker.com/kb/2016/04/">
<link rel="archives" title="February 2016" href="http://www.amibroker.com/kb/2016/02/">
<link rel="archives" title="January 2016" href="http://www.amibroker.com/kb/2016/01/">
<link rel="archives" title="December 2015" href="http://www.amibroker.com/kb/2015/12/">
<link rel="archives" title="November 2015" href="http://www.amibroker.com/kb/2015/11/">
<link rel="archives" title="October 2015" href="http://www.amibroker.com/kb/2015/10/">
<link rel="archives" title="September 2015" href="http://www.amibroker.com/kb/2015/09/">
<link rel="archives" title="August 2015" href="http://www.amibroker.com/kb/2015/08/">
<link rel="archives" title="March 2015" href="http://www.amibroker.com/kb/2015/03/">
<link rel="archives" title="February 2015" href="http://www.amibroker.com/kb/2015/02/">
<link rel="archives" title="January 2015" href="http://www.amibroker.com/kb/2015/01/">
<link rel="archives" title="December 2014" href="http://www.amibroker.com/kb/2014/12/">
<link rel="archives" title="November 2014" href="http://www.amibroker.com/kb/2014/11/">
<link rel="archives" title="October 2014" href="http://www.amibroker.com/kb/2014/10/">
<link rel="archives" title="September 2014" href="http://www.amibroker.com/kb/2014/09/">
<link rel="archives" title="August 2014" href="http://www.amibroker.com/kb/2014/08/">
<link rel="archives" title="May 2014" href="http://www.amibroker.com/kb/2014/05/">
<link rel="archives" title="March 2014" href="http://www.amibroker.com/kb/2014/03/">
<link rel="archives" title="May 2012" href="http://www.amibroker.com/kb/2012/05/">
<link rel="archives" title="October 2011" href="http://www.amibroker.com/kb/2011/10/">
<link rel="archives" title="September 2011" href="http://www.amibroker.com/kb/2011/09/">
<link rel="archives" title="November 2010" href="http://www.amibroker.com/kb/2010/11/">
<link rel="archives" title="September 2010" href="http://www.amibroker.com/kb/2010/09/">
<link rel="archives" title="July 2010" href="http://www.amibroker.com/kb/2010/07/">
<link rel="archives" title="April 2009" href="http://www.amibroker.com/kb/2009/04/">
<link rel="archives" title="March 2009" href="http://www.amibroker.com/kb/2009/03/">
<link rel="archives" title="August 2008" href="http://www.amibroker.com/kb/2008/08/">
<link rel="archives" title="July 2008" href="http://www.amibroker.com/kb/2008/07/">
<link rel="archives" title="May 2008" href="http://www.amibroker.com/kb/2008/05/">
<link rel="archives" title="April 2008" href="http://www.amibroker.com/kb/2008/04/">
<link rel="archives" title="February 2008" href="http://www.amibroker.com/kb/2008/02/">
<link rel="archives" title="October 2007" href="http://www.amibroker.com/kb/2007/10/">
<link rel="archives" title="August 2007" href="http://www.amibroker.com/kb/2007/08/">
<link rel="archives" title="July 2007" href="http://www.amibroker.com/kb/2007/07/">
<link rel="archives" title="May 2007" href="http://www.amibroker.com/kb/2007/05/">
<link rel="archives" title="April 2007" href="http://www.amibroker.com/kb/2007/04/">
<link rel="archives" title="March 2007" href="http://www.amibroker.com/kb/2007/03/">
<link rel="archives" title="February 2007" href="http://www.amibroker.com/kb/2007/02/">
<link rel="archives" title="January 2007" href="http://www.amibroker.com/kb/2007/01/">
<link rel="archives" title="October 2006" href="http://www.amibroker.com/kb/2006/10/">
<link rel="archives" title="September 2006" href="http://www.amibroker.com/kb/2006/09/">
<link rel="archives" title="August 2006" href="http://www.amibroker.com/kb/2006/08/">
<link rel="archives" title="May 2006" href="http://www.amibroker.com/kb/2006/05/">
<link rel="archives" title="April 2006" href="http://www.amibroker.com/kb/2006/04/">
<link rel="archives" title="March 2006" href="http://www.amibroker.com/kb/2006/03/">
<link rel="dns-prefetch" href="http://s.w.org/">


<link rel="https://api.w.org/" href="http://www.amibroker.com/kb/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.amibroker.com/kb/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.amibroker.com/kb/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="How to draw regression channel programatically" href="http://www.amibroker.com/kb/2014/10/10/how-to-draw-regression-channel-programatically/">
<link rel="next" title="Per-symbol profit/loss in a portfolio backtest" href="http://www.amibroker.com/kb/2014/10/13/per-symbol-profitloss-in-a-portfolio-backtest/">
<meta name="generator" value="WordPress 5.0">
<link rel="canonical" href="http://www.amibroker.com/kb/2014/10/12/position-sizing-based-on-risk/">
<link rel="shortlink" href="http://www.amibroker.com/kb/?p=544">
<link rel="alternate" type="application/json+oembed" href="http://www.amibroker.com/kb/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.amibroker.com%2Fkb%2F2014%2F10%2F12%2Fposition-sizing-based-on-risk%2F">
<link rel="alternate" type="text/xml+oembed" href="http://www.amibroker.com/kb/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.amibroker.com%2Fkb%2F2014%2F10%2F12%2Fposition-sizing-based-on-risk%2F&amp;format=xml">
</head>
<body id="home" class="log">

<header>
<h1><img src="http://www.amibroker.com/img/ami_neo_logo2.png" width="30" height="30" alt=""><span id="ami">ami</span>broker</h1>
<nav>
<a href="http://www.amibroker.com/index.html">Home</a>
<a href="http://www.amibroker.com/news.html">News</a>
<a href="http://www.amibroker.com/products.html">Products</a>
<a href="http://www.amibroker.com/download.html">Download</a>
<a href="http://www.amibroker.com/order.html">Order</a>
<a href="http://www.amibroker.com/support.html">Support</a>
</nav>
</header>

<div id="headbar" class="bgverylight"><a href="http://www.amibroker.com/index.html">Home</a> &#x25B8; <a href="http://www.amibroker.com/kb/">Knowledge Base</a></div>

<div id="container">
<div id="maincol">
<div class="col"><div class="entry">
<h2 class="entrydate">October 12, 2014</h2>
<h3 class="entrytitle" id="post-544"><a href="http://www.amibroker.com/kb/2014/10/12/position-sizing-based-on-risk/" rel="bookmark">Position sizing based on risk</a></h3>
<div class="entrybody">
<p>One of most popular position sizing techniques is Van Tharp risk-based method. Van Tharp defines risk as the maximum amount that can be lost in a trade. Typically you limit your loses by setting up a maximum loss stop.</p>
<p>The amount risked should not be confused with amount invested. If your stop is 15% away from entry price, in worst case you risk losing 15% of the position size (amount invested), not the entire amount. So risk practically means the amount of maximum loss stop.</p>
<p>Now, imagine that we only allow to lose 1% of entire portfolio equity in single trade. If our stop is placed 15% away, it means that to risk just 1% of entire equity we can put 1/15 part of our available equity into this trade. As we can see desired position size is inversely proportional to stop amount.</p>
<pre><code style="color: #0000BB">Buy&#xA0;<span style="color: #000000">=&#xA0;</span><span style="color: #0000BB">Cross</span><span style="color: #000000">(&#xA0;</span><span style="color: #0000BB">C</span><span style="color: #000000">,&#xA0;</span><span style="color: #0000BB">MA</span><span style="color: #000000">(&#xA0;</span><span style="color: #0000BB">C</span><span style="color: #000000">,&#xA0;</span><span style="color: #0000BB">20&#xA0;</span><span style="color: #000000">)&#xA0;);&#xA0;</span><span style="color: #007000">//&#xA0;some&#xA0;trading&#xA0;rules<br></span><span style="color: #0000BB">Sell&#xA0;</span><span style="color: #000000">=&#xA0;</span><span style="color: #0000BB">Cross</span><span style="color: #000000">(&#xA0;</span><span style="color: #0000BB">MA</span><span style="color: #000000">(&#xA0;</span><span style="color: #0000BB">C</span><span style="color: #000000">,&#xA0;</span><span style="color: #0000BB">20&#xA0;</span><span style="color: #000000">),&#xA0;</span><span style="color: #0000BB">C&#xA0;</span><span style="color: #000000">);<br></span><span style="color: #007000">//<br></span><span style="color: #0000BB">PositionRisk&#xA0;</span><span style="color: #000000">=&#xA0;</span><span style="color: #0000BB">1</span><span style="color: #000000">;&#xA0;</span><span style="color: #007000">//&#xA0;how&#xA0;much&#xA0;(in&#xA0;percent&#xA0;of&#xA0;equity)&#xA0;we&#xA0;risk&#xA0;in&#xA0;single&#xA0;position<br></span><span style="color: #0000BB">TradeRisk&#xA0;</span><span style="color: #000000">=&#xA0;</span><span style="color: #0000BB">15</span><span style="color: #000000">;&#xA0;</span><span style="color: #007000">//&#xA0;trade&#xA0;risk&#xA0;in&#xA0;percent&#xA0;equals&#xA0;to&#xA0;max.&#xA0;loss&#xA0;percentage&#xA0;stop<br></span><span style="color: #0000BB">PctSize&#xA0;</span><span style="color: #000000">=&#xA0;</span><span style="color: #0000BB">100&#xA0;</span><span style="color: #000000">*&#xA0;</span><span style="color: #0000BB">PositionRisk&#xA0;</span><span style="color: #000000">/&#xA0;</span><span style="color: #0000BB">TradeRisk</span><span style="color: #000000">;<br></span><span style="color: #007000">//<br></span><span style="color: #0000BB">ApplyStop</span><span style="color: #000000">(&#xA0;</span><span style="color: #0000BB">stopTypeLoss</span><span style="color: #000000">,&#xA0;</span><span style="color: #0000BB">stopModePercent</span><span style="color: #000000">,&#xA0;</span><span style="color: #0000BB">TradeRisk</span><span style="color: #000000">,&#xA0;</span><span style="color: #0000BB">True&#xA0;</span><span style="color: #000000">);<br></span><span style="color: #0000BB">SetPositionSize</span><span style="color: #000000">(&#xA0;</span><span style="color: #0000BB">PctSize</span><span style="color: #000000">,&#xA0;</span><span style="color: #0000BB">spsPercentOfEquity&#xA0;</span><span style="color: #000000">);</span></code></pre>
<p>Let us see how it works, say we have equity of $60,000, and we only want to risk 1% in single trade ($600). We set our protective stop to 15%. If stock entry price is say $20, we would put our protective stop at $20-15% = $17, so we will risk $3 per share. Given the fact that we want to risk only $600 in that trade, we could buy 200 shares (position risk 200 * $3 = $600). 200 shares @ $20 each gives position value of $4000. $4000 represents 6.667% of $60,000 and this is actual percentage position size we would open. As we can clearly see 6.667% is what we would get if we divide 1 (percent position risk) by 15 (percent loss amount): 1/15 = 6.667% </p>
<p>Instead of setting our stop as fixed percentage, we can use more sophisticated methods. For example we can adjust our maximum loss (so the risk) dynamically, using average true range, so it will get wider if stock is volatile and narrower if stock prices move in a narrow range. Say we want to set our stop to twice the amount of ATR( 20 ) at the entry bar and risk 3% of portfolio equity in a single trade:</p>
<pre><code style="color: #0000BB">Buy&#xA0;<span style="color: #000000">=&#xA0;</span><span style="color: #0000BB">Cross</span><span style="color: #000000">(&#xA0;</span><span style="color: #0000BB">C</span><span style="color: #000000">,&#xA0;</span><span style="color: #0000BB">MA</span><span style="color: #000000">(&#xA0;</span><span style="color: #0000BB">C</span><span style="color: #000000">,&#xA0;</span><span style="color: #0000BB">20&#xA0;</span><span style="color: #000000">)&#xA0;);&#xA0;</span><span style="color: #007000">//&#xA0;some&#xA0;trading&#xA0;rules<br></span><span style="color: #0000BB">Sell&#xA0;</span><span style="color: #000000">=&#xA0;</span><span style="color: #0000BB">Cross</span><span style="color: #000000">(&#xA0;</span><span style="color: #0000BB">MA</span><span style="color: #000000">(&#xA0;</span><span style="color: #0000BB">C</span><span style="color: #000000">,&#xA0;</span><span style="color: #0000BB">20&#xA0;</span><span style="color: #000000">),&#xA0;</span><span style="color: #0000BB">C&#xA0;</span><span style="color: #000000">);<br></span><span style="color: #007000">//<br></span><span style="color: #0000BB">RiskPerShare&#xA0;</span><span style="color: #000000">=&#xA0;&#xA0;</span><span style="color: #0000BB">2&#xA0;</span><span style="color: #000000">*&#xA0;</span><span style="color: #0000BB">ATR</span><span style="color: #000000">(&#xA0;</span><span style="color: #0000BB">20&#xA0;</span><span style="color: #000000">);<br></span><span style="color: #0000BB">ApplyStop</span><span style="color: #000000">(&#xA0;</span><span style="color: #0000BB">stopTypeLoss</span><span style="color: #000000">,&#xA0;</span><span style="color: #0000BB">stopModePoint</span><span style="color: #000000">,&#xA0;</span><span style="color: #0000BB">RiskPerShare</span><span style="color: #000000">,&#xA0;</span><span style="color: #0000BB">True&#xA0;</span><span style="color: #000000">);<br></span><span style="color: #007000">//<br>//&#xA0;risk&#xA0;3%&#xA0;of&#xA0;entire&#xA0;equity&#xA0;on&#xA0;single&#xA0;trade<br></span><span style="color: #0000BB">PositionRisk&#xA0;</span><span style="color: #000000">=&#xA0;</span><span style="color: #0000BB">3</span><span style="color: #000000">;<br></span><span style="color: #007000">//<br>//&#xA0;position&#xA0;size&#xA0;calculation<br></span><span style="color: #0000BB">PctSize&#xA0;</span><span style="color: #000000">=&#xA0;&#xA0;</span><span style="color: #0000BB">PositionRisk&#xA0;</span><span style="color: #000000">*&#xA0;</span><span style="color: #0000BB">BuyPrice&#xA0;</span><span style="color: #000000">/&#xA0;</span><span style="color: #0000BB">RiskPerShare</span><span style="color: #000000">;<br></span><span style="color: #0000BB">SetPositionSize</span><span style="color: #000000">(&#xA0;</span><span style="color: #0000BB">PctSize</span><span style="color: #000000">,&#xA0;</span><span style="color: #0000BB">spsPercentOfEquity&#xA0;</span><span style="color: #000000">);</span></code></pre>
<p>This time our maximum loss (so the risk per share) is expressed in dollars not in percents. Let us verify the above calculation. Assume that our equity is $90,000, stock price is $18, ATR(20) is $1. Now risk per share (the stop amount) equals 2 * $1 = $2, so our calculated position size (required % of equity) from the above formula would be:</p>
<p align="center">
<em>PctSize = 3 * $18 / $2 = 27%</em>
</p>
<p>27% of $90,000 means trade size of $24,300, i.e. 1350 shares (@ $18 each). Since we risk $2 on each share, the total risk is $2 * 1350 shares = $2700, which is exactly 3% of our total equity ($90,000 * 3%).</p>
<p>In case of futures, we would need to take into account the fact that our position size depends on Margin Deposit, while the stop size (expressed in dollars) depends on the Point Value, so the position sizing formula would need to be modified.</p>
<pre><code style="color: #0000BB">Buy&#xA0;<span style="color: #000000">=&#xA0;</span><span style="color: #0000BB">Cross</span><span style="color: #000000">(&#xA0;</span><span style="color: #0000BB">C</span><span style="color: #000000">,&#xA0;</span><span style="color: #0000BB">MA</span><span style="color: #000000">(&#xA0;</span><span style="color: #0000BB">C</span><span style="color: #000000">,&#xA0;</span><span style="color: #0000BB">20&#xA0;</span><span style="color: #000000">)&#xA0;);&#xA0;</span><span style="color: #007000">//&#xA0;some&#xA0;trading&#xA0;rules<br></span><span style="color: #0000BB">Sell&#xA0;</span><span style="color: #000000">=&#xA0;</span><span style="color: #0000BB">Cross</span><span style="color: #000000">(&#xA0;</span><span style="color: #0000BB">MA</span><span style="color: #000000">(&#xA0;</span><span style="color: #0000BB">C</span><span style="color: #000000">,&#xA0;</span><span style="color: #0000BB">20&#xA0;</span><span style="color: #000000">),&#xA0;</span><span style="color: #0000BB">C&#xA0;</span><span style="color: #000000">);<br></span><span style="color: #007000">//<br></span><span style="color: #0000BB">RiskPerContract&#xA0;</span><span style="color: #000000">=&#xA0;</span><span style="color: #0000BB">2&#xA0;</span><span style="color: #000000">*&#xA0;</span><span style="color: #0000BB">ATR</span><span style="color: #000000">(&#xA0;</span><span style="color: #0000BB">20&#xA0;</span><span style="color: #000000">);<br></span><span style="color: #0000BB">ApplyStop</span><span style="color: #000000">(&#xA0;</span><span style="color: #0000BB">stopTypeLoss</span><span style="color: #000000">,&#xA0;</span><span style="color: #0000BB">stopModePoint</span><span style="color: #000000">,&#xA0;</span><span style="color: #0000BB">RiskPerContract</span><span style="color: #000000">,&#xA0;</span><span style="color: #0000BB">True&#xA0;</span><span style="color: #000000">);<br></span><span style="color: #007000">//<br>//&#xA0;risk&#xA0;1%&#xA0;of&#xA0;entire&#xA0;equity&#xA0;on&#xA0;single&#xA0;trade<br></span><span style="color: #0000BB">PositionRisk&#xA0;</span><span style="color: #000000">=&#xA0;</span><span style="color: #0000BB">1</span><span style="color: #000000">;&#xA0;<br></span><span style="color: #0000BB">PctSize&#xA0;</span><span style="color: #000000">=&#xA0;&#xA0;</span><span style="color: #0000BB">PositionRisk&#xA0;</span><span style="color: #000000">*&#xA0;</span><span style="color: #0000BB">MarginDeposit&#xA0;&#xA0;</span><span style="color: #000000">/&#xA0;(&#xA0;</span><span style="color: #0000BB">RiskPerContract&#xA0;</span><span style="color: #000000">*&#xA0;</span><span style="color: #0000BB">PointValue&#xA0;</span><span style="color: #000000">);&#xA0;<br></span><span style="color: #0000BB">SetPositionSize</span><span style="color: #000000">(&#xA0;</span><span style="color: #0000BB">PctSize</span><span style="color: #000000">,&#xA0;</span><span style="color: #0000BB">spsPercentOfEquity&#xA0;</span><span style="color: #000000">);</span></code></pre>
<p>Let us assume that we are trading a contract with $5000 margin deposit, point value $50, our equity is 1 million and ATR(20) is equal 5 big points. Risk per contract is then 10 big points. Now the above formula would give us:</p>
<p align="center">
<em>PctSize = 1% * $5000 / ( 10 * $50 ) = 10%  </em>
</p>
<p>10% of our 1 million equity is $100K, which allows us to buy 20 contracts (20 * $5000 each). Since our risk is 10 big points and each big point has a value of $50 we are risking 10 * $50 = $500 per contract. We have 20 contracts so entire position represents a risk 20 * $500 = $10,000 which is 1% of our 1 million equity. </p>
<div class="yarpp-related">
<h3>Related articles:</h3><ol>
<li><a href="http://www.amibroker.com/kb/2014/10/17/using-price-levels-with-applystop-function/" rel="bookmark" title="Using price levels with ApplyStop function">Using price levels with ApplyStop function </a></li>
<li><a href="http://www.amibroker.com/kb/2014/09/24/how-to-identify-which-signal-triggers/" rel="bookmark" title="How to identify signal that triggered entry/exit if multiple signals are used">How to identify signal that triggered entry/exit if multiple signals are used </a></li>
<li><a href="http://www.amibroker.com/kb/2006/09/29/stops-priority-in-the-default-backtest-procedure-in-amibroker/" rel="bookmark" title="Stops priority in the default backtest procedure in AmiBroker">Stops priority in the default backtest procedure in AmiBroker </a></li>
<li><a href="http://www.amibroker.com/kb/2006/03/06/re-balancing-open-positions/" rel="bookmark" title="Re-balancing open positions">Re-balancing open positions </a></li>
<li><a href="http://www.amibroker.com/kb/2006/04/04/adding-custom-metric-average-adverse-excursion/" rel="bookmark" title="Adding custom metric: Average adverse excursion">Adding custom metric: Average adverse excursion </a></li>
</ol>
</div>
<p class="comments_link">
<img src="http://www.amibroker.com/kb/wp-content/themes/neo_gentle_calm_mod/images/file.gif" title="file" alt="*"> 
Filed by Tomasz Janeczko at 4:11 pm under <a href="http://www.amibroker.com/kb/category/analysis/backtest-analysis/" rel="category tag">Backtest</a><br>
<span>Comments Off<span class="screen-reader-text"> on Position sizing based on risk</span></span>				</p>
</div>

</div>


<p class="nocomments">Comments are closed.</p>
</div>
</div>

<div id="navcol">
<h2>Search</h2>
<ul>
<li>
</li>	
</ul> 
<h2>Links</h2>
<ul>
<li><a href="http://www.amibroker.com/kb" title="AmiBroker Knowledge Base">Home</a></li>
<li><a href="http://www.amibroker.com/kb/feed/" title="Syndicate this site using RSS"><abbr title="Really Simple Syndication">RSS</abbr></a></li>
</ul>
<ul id="linkslist">
<li class="pagenav"><h2>Pages</h2><ul><li class="page_item page-item-766"><a href="http://www.amibroker.com/kb/toc/">Table of Contents</a></li>
<li class="page_item page-item-2"><a href="http://www.amibroker.com/kb/about/">About Knowledge Base</a></li>
</ul></li>		  <li id="linkcat-12" class="linkcat"><h2>See also</h2>
<ul>
<li><a href="http://www.amibroker.com/devlog/" rel="me" title="AmiBroker Developer Log">AmiBroker DevLog</a></li>
</ul>
</li>
</ul>		
<h2>Categories</h2>
<ul>
<li class="cat-item cat-item-2"><a href="http://www.amibroker.com/kb/category/afl/" title="AmiBroker Formula Language tips">AFL</a>
</li>
<li class="cat-item cat-item-57"><a href="http://www.amibroker.com/kb/category/analysis/" title="Analysis (Trading systems, Scans, Explorations, Backtest, Optimization)">Analysis</a>
<ul class="children">
<li class="cat-item cat-item-7"><a href="http://www.amibroker.com/kb/category/analysis/backtest-analysis/" title="Trading system backtesting">Backtest</a>
<ul class="children">
<li class="cat-item cat-item-8"><a href="http://www.amibroker.com/kb/category/analysis/backtest-analysis/custom-backtest/" title="Code samples showing how to use Custom Backtester interface procedures">Custom Backtest</a>
</li>
<li class="cat-item cat-item-39"><a href="http://www.amibroker.com/kb/category/analysis/backtest-analysis/general-backtest/" title="General backtesting topics">General</a>
</li>
<li class="cat-item cat-item-41"><a href="http://www.amibroker.com/kb/category/analysis/backtest-analysis/problems-backtest/" title="How to solve problems that arise with backtesting">Problems</a>
</li>
<li class="cat-item cat-item-40"><a href="http://www.amibroker.com/kb/category/analysis/backtest-analysis/stops-backtest/" title="How to use stops (ApplyStop() and other techniques)">Stops</a>
</li>
</ul>
</li>
<li class="cat-item cat-item-6"><a href="http://www.amibroker.com/kb/category/analysis/explorations/" title="Code, usage examples and hints for Explorations">Exploration</a>
</li>
</ul>
</li>
<li class="cat-item cat-item-10"><a href="http://www.amibroker.com/kb/category/charting/">Charting</a>
<ul class="children">
<li class="cat-item cat-item-3"><a href="http://www.amibroker.com/kb/category/charting/indicators/" title="AFL code tips for indicators">Indicators</a>
</li>
</ul>
</li>
<li class="cat-item cat-item-5"><a href="http://www.amibroker.com/kb/category/data/" title="How to download, import, export quotes ">Data</a>
<ul class="children">
<li class="cat-item cat-item-4"><a href="http://www.amibroker.com/kb/category/data/amiquote/" title="AmiQuote usage tips">AmiQuote</a>
</li>
</ul>
</li>
<li class="cat-item cat-item-11"><a href="http://www.amibroker.com/kb/category/installation/">Installation</a>
</li>
<li class="cat-item cat-item-25"><a href="http://www.amibroker.com/kb/category/troubleshooting/" title="Troubleshooting problems">Troubleshooting</a>
</li>
<li class="cat-item cat-item-1"><a href="http://www.amibroker.com/kb/category/uncategorized/">Uncategorized</a>
</li>
<li class="cat-item cat-item-35"><a href="http://www.amibroker.com/kb/category/user-interface/" title="User Interface topics (customization, etc)">User Interface</a>
</li>
</ul>
<h2>Tags</h2>
<ul>
<a href="http://www.amibroker.com/kb/tag/64-bit/" class="tag-cloud-link tag-link-48 tag-link-position-1" style="font-size: 8pt;" aria-label="64-bit (1 item)">64-bit</a>
<a href="http://www.amibroker.com/kb/tag/account-manager/" class="tag-cloud-link tag-link-68 tag-link-position-2" style="font-size: 8pt;" aria-label="Account Manager (1 item)">Account Manager</a>
<a href="http://www.amibroker.com/kb/tag/addtocomposite/" class="tag-cloud-link tag-link-43 tag-link-position-3" style="font-size: 9.5555555555556pt;" aria-label="AddToComposite (2 items)">AddToComposite</a>
<a href="http://www.amibroker.com/kb/tag/adline/" class="tag-cloud-link tag-link-42 tag-link-position-4" style="font-size: 8pt;" aria-label="ADLine (1 item)">ADLine</a>
<a href="http://www.amibroker.com/kb/tag/afl/" class="tag-cloud-link tag-link-53 tag-link-position-5" style="font-size: 22pt;" aria-label="AFL (82 items)">AFL</a>
<a href="http://www.amibroker.com/kb/tag/amiquote/" class="tag-cloud-link tag-link-51 tag-link-position-6" style="font-size: 10.592592592593pt;" aria-label="AmiQuote (3 items)">AmiQuote</a>
<a href="http://www.amibroker.com/kb/tag/analysis/" class="tag-cloud-link tag-link-14 tag-link-position-7" style="font-size: 20.271604938272pt;" aria-label="Analysis (51 items)">Analysis</a>
<a href="http://www.amibroker.com/kb/tag/backtest/" class="tag-cloud-link tag-link-15 tag-link-position-8" style="font-size: 19.493827160494pt;" aria-label="Backtest (42 items)">Backtest</a>
<a href="http://www.amibroker.com/kb/tag/categories/" class="tag-cloud-link tag-link-64 tag-link-position-9" style="font-size: 9.5555555555556pt;" aria-label="Categories (2 items)">Categories</a>
<a href="http://www.amibroker.com/kb/tag/charting/" class="tag-cloud-link tag-link-55 tag-link-position-10" style="font-size: 20.012345679012pt;" aria-label="Charting (48 items)">Charting</a>
<a href="http://www.amibroker.com/kb/tag/correlation/" class="tag-cloud-link tag-link-38 tag-link-position-11" style="font-size: 8pt;" aria-label="Correlation (1 item)">Correlation</a>
<a href="http://www.amibroker.com/kb/tag/custom-backtester/" class="tag-cloud-link tag-link-30 tag-link-position-12" style="font-size: 12.753086419753pt;" aria-label="Custom Backtester (6 items)">Custom Backtester</a>
<a href="http://www.amibroker.com/kb/tag/custom-metrics/" class="tag-cloud-link tag-link-21 tag-link-position-13" style="font-size: 11.456790123457pt;" aria-label="Custom Metrics (4 items)">Custom Metrics</a>
<a href="http://www.amibroker.com/kb/tag/data/" class="tag-cloud-link tag-link-54 tag-link-position-14" style="font-size: 17.16049382716pt;" aria-label="Data (22 items)">Data</a>
<a href="http://www.amibroker.com/kb/tag/debug/" class="tag-cloud-link tag-link-37 tag-link-position-15" style="font-size: 8pt;" aria-label="Debug (1 item)">Debug</a>
<a href="http://www.amibroker.com/kb/tag/delisted-stocks/" class="tag-cloud-link tag-link-62 tag-link-position-16" style="font-size: 8pt;" aria-label="Delisted stocks (1 item)">Delisted stocks</a>
<a href="http://www.amibroker.com/kb/tag/excel/" class="tag-cloud-link tag-link-44 tag-link-position-17" style="font-size: 8pt;" aria-label="Excel (1 item)">Excel</a>
<a href="http://www.amibroker.com/kb/tag/exploration/" class="tag-cloud-link tag-link-28 tag-link-position-18" style="font-size: 12.753086419753pt;" aria-label="Exploration (6 items)">Exploration</a>
<a href="http://www.amibroker.com/kb/tag/export/" class="tag-cloud-link tag-link-31 tag-link-position-19" style="font-size: 13.185185185185pt;" aria-label="Export (7 items)">Export</a>
<a href="http://www.amibroker.com/kb/tag/fasttrack/" class="tag-cloud-link tag-link-46 tag-link-position-20" style="font-size: 8pt;" aria-label="FastTrack (1 item)">FastTrack</a>
<a href="http://www.amibroker.com/kb/tag/file/" class="tag-cloud-link tag-link-66 tag-link-position-21" style="font-size: 9.5555555555556pt;" aria-label="File (2 items)">File</a>
<a href="http://www.amibroker.com/kb/tag/forex/" class="tag-cloud-link tag-link-22 tag-link-position-22" style="font-size: 9.5555555555556pt;" aria-label="Forex (2 items)">Forex</a>
<a href="http://www.amibroker.com/kb/tag/fullname/" class="tag-cloud-link tag-link-45 tag-link-position-23" style="font-size: 8pt;" aria-label="FullName (1 item)">FullName</a>
<a href="http://www.amibroker.com/kb/tag/import/" class="tag-cloud-link tag-link-47 tag-link-position-24" style="font-size: 10.592592592593pt;" aria-label="Import (3 items)">Import</a>
<a href="http://www.amibroker.com/kb/tag/installation/" class="tag-cloud-link tag-link-52 tag-link-position-25" style="font-size: 15.777777777778pt;" aria-label="Installation (15 items)">Installation</a>
<a href="http://www.amibroker.com/kb/tag/interactive-brokers/" class="tag-cloud-link tag-link-60 tag-link-position-26" style="font-size: 8pt;" aria-label="Interactive Brokers (1 item)">Interactive Brokers</a>
<a href="http://www.amibroker.com/kb/tag/matrix/" class="tag-cloud-link tag-link-65 tag-link-position-27" style="font-size: 8pt;" aria-label="Matrix (1 item)">Matrix</a>
<a href="http://www.amibroker.com/kb/tag/menus/" class="tag-cloud-link tag-link-70 tag-link-position-28" style="font-size: 8pt;" aria-label="Menus (1 item)">Menus</a>
<a href="http://www.amibroker.com/kb/tag/metastock/" class="tag-cloud-link tag-link-63 tag-link-position-29" style="font-size: 8pt;" aria-label="Metastock (1 item)">Metastock</a>
<a href="http://www.amibroker.com/kb/tag/ole/" class="tag-cloud-link tag-link-18 tag-link-position-30" style="font-size: 10.592592592593pt;" aria-label="OLE (3 items)">OLE</a>
<a href="http://www.amibroker.com/kb/tag/optimization/" class="tag-cloud-link tag-link-26 tag-link-position-31" style="font-size: 9.5555555555556pt;" aria-label="Optimization (2 items)">Optimization</a>
<a href="http://www.amibroker.com/kb/tag/position-sizing/" class="tag-cloud-link tag-link-59 tag-link-position-32" style="font-size: 8pt;" aria-label="Position Sizing (1 item)">Position Sizing</a>
<a href="http://www.amibroker.com/kb/tag/report-charts/" class="tag-cloud-link tag-link-16 tag-link-position-33" style="font-size: 10.592592592593pt;" aria-label="Report Charts (3 items)">Report Charts</a>
<a href="http://www.amibroker.com/kb/tag/rotational-trading/" class="tag-cloud-link tag-link-61 tag-link-position-34" style="font-size: 8pt;" aria-label="Rotational Trading (1 item)">Rotational Trading</a>
<a href="http://www.amibroker.com/kb/tag/runtime/" class="tag-cloud-link tag-link-49 tag-link-position-35" style="font-size: 8pt;" aria-label="Runtime (1 item)">Runtime</a>
<a href="http://www.amibroker.com/kb/tag/side-by-side/" class="tag-cloud-link tag-link-50 tag-link-position-36" style="font-size: 8pt;" aria-label="Side-By-Side (1 item)">Side-By-Side</a>
<a href="http://www.amibroker.com/kb/tag/third-party/" class="tag-cloud-link tag-link-34 tag-link-position-37" style="font-size: 11.456790123457pt;" aria-label="Third-party (4 items)">Third-party</a>
<a href="http://www.amibroker.com/kb/tag/time-frame/" class="tag-cloud-link tag-link-32 tag-link-position-38" style="font-size: 9.5555555555556pt;" aria-label="Time Frame (2 items)">Time Frame</a>
<a href="http://www.amibroker.com/kb/tag/toolbar/" class="tag-cloud-link tag-link-69 tag-link-position-39" style="font-size: 8pt;" aria-label="Toolbar (1 item)">Toolbar</a>
<a href="http://www.amibroker.com/kb/tag/troubleshooting/" class="tag-cloud-link tag-link-56 tag-link-position-40" style="font-size: 15pt;" aria-label="Troubleshooting (12 items)">Troubleshooting</a>
<a href="http://www.amibroker.com/kb/tag/ui/" class="tag-cloud-link tag-link-24 tag-link-position-41" style="font-size: 17.938271604938pt;" aria-label="UI (27 items)">UI</a>
<a href="http://www.amibroker.com/kb/tag/walk-forward/" class="tag-cloud-link tag-link-27 tag-link-position-42" style="font-size: 8pt;" aria-label="Walk-Forward (1 item)">Walk-Forward</a>
<a href="http://www.amibroker.com/kb/tag/watch-lists/" class="tag-cloud-link tag-link-29 tag-link-position-43" style="font-size: 8pt;" aria-label="Watch Lists (1 item)">Watch Lists</a>
<a href="http://www.amibroker.com/kb/tag/web-research/" class="tag-cloud-link tag-link-67 tag-link-position-44" style="font-size: 9.5555555555556pt;" aria-label="Web Research (2 items)">Web Research</a>
<a href="http://www.amibroker.com/kb/tag/z-order/" class="tag-cloud-link tag-link-58 tag-link-position-45" style="font-size: 8pt;" aria-label="Z-Order (1 item)">Z-Order</a>		</ul>
<h2>Archives</h2>
<ul>
<li><a href="http://www.amibroker.com/kb/2017/10/">October 2017</a></li>
<li><a href="http://www.amibroker.com/kb/2017/06/">June 2017</a></li>
<li><a href="http://www.amibroker.com/kb/2017/05/">May 2017</a></li>
<li><a href="http://www.amibroker.com/kb/2016/11/">November 2016</a></li>
<li><a href="http://www.amibroker.com/kb/2016/04/">April 2016</a></li>
<li><a href="http://www.amibroker.com/kb/2016/02/">February 2016</a></li>
<li><a href="http://www.amibroker.com/kb/2016/01/">January 2016</a></li>
<li><a href="http://www.amibroker.com/kb/2015/12/">December 2015</a></li>
<li><a href="http://www.amibroker.com/kb/2015/11/">November 2015</a></li>
<li><a href="http://www.amibroker.com/kb/2015/10/">October 2015</a></li>
<li><a href="http://www.amibroker.com/kb/2015/09/">September 2015</a></li>
<li><a href="http://www.amibroker.com/kb/2015/08/">August 2015</a></li>
<li><a href="http://www.amibroker.com/kb/2015/03/">March 2015</a></li>
<li><a href="http://www.amibroker.com/kb/2015/02/">February 2015</a></li>
<li><a href="http://www.amibroker.com/kb/2015/01/">January 2015</a></li>
<li><a href="http://www.amibroker.com/kb/2014/12/">December 2014</a></li>
<li><a href="http://www.amibroker.com/kb/2014/11/">November 2014</a></li>
<li><a href="http://www.amibroker.com/kb/2014/10/">October 2014</a></li>
<li><a href="http://www.amibroker.com/kb/2014/09/">September 2014</a></li>
<li><a href="http://www.amibroker.com/kb/2014/08/">August 2014</a></li>
<li><a href="http://www.amibroker.com/kb/2014/05/">May 2014</a></li>
<li><a href="http://www.amibroker.com/kb/2014/03/">March 2014</a></li>
<li><a href="http://www.amibroker.com/kb/2012/05/">May 2012</a></li>
<li><a href="http://www.amibroker.com/kb/2011/10/">October 2011</a></li>
<li><a href="http://www.amibroker.com/kb/2011/09/">September 2011</a></li>
<li><a href="http://www.amibroker.com/kb/2010/11/">November 2010</a></li>
<li><a href="http://www.amibroker.com/kb/2010/09/">September 2010</a></li>
<li><a href="http://www.amibroker.com/kb/2010/07/">July 2010</a></li>
<li><a href="http://www.amibroker.com/kb/2009/04/">April 2009</a></li>
<li><a href="http://www.amibroker.com/kb/2009/03/">March 2009</a></li>
<li><a href="http://www.amibroker.com/kb/2008/08/">August 2008</a></li>
<li><a href="http://www.amibroker.com/kb/2008/07/">July 2008</a></li>
<li><a href="http://www.amibroker.com/kb/2008/05/">May 2008</a></li>
<li><a href="http://www.amibroker.com/kb/2008/04/">April 2008</a></li>
<li><a href="http://www.amibroker.com/kb/2008/02/">February 2008</a></li>
<li><a href="http://www.amibroker.com/kb/2007/10/">October 2007</a></li>
<li><a href="http://www.amibroker.com/kb/2007/08/">August 2007</a></li>
<li><a href="http://www.amibroker.com/kb/2007/07/">July 2007</a></li>
<li><a href="http://www.amibroker.com/kb/2007/05/">May 2007</a></li>
<li><a href="http://www.amibroker.com/kb/2007/04/">April 2007</a></li>
<li><a href="http://www.amibroker.com/kb/2007/03/">March 2007</a></li>
<li><a href="http://www.amibroker.com/kb/2007/02/">February 2007</a></li>
<li><a href="http://www.amibroker.com/kb/2007/01/">January 2007</a></li>
<li><a href="http://www.amibroker.com/kb/2006/10/">October 2006</a></li>
<li><a href="http://www.amibroker.com/kb/2006/09/">September 2006</a></li>
<li><a href="http://www.amibroker.com/kb/2006/08/">August 2006</a></li>
<li><a href="http://www.amibroker.com/kb/2006/05/">May 2006</a></li>
<li><a href="http://www.amibroker.com/kb/2006/04/">April 2006</a></li>
<li><a href="http://www.amibroker.com/kb/2006/03/">March 2006</a></li>
</ul>
<h2>Meta</h2>
<ul>
<li></li>
<li><a href="https://www.amibroker.com/kb/wp-login.php">Log in</a></li> 
<li><a href="http://www.amibroker.com/kb/feed/" title="Syndicate this site using RSS">
<abbr title="Really Simple Syndication">RSS</abbr></a></li>
<li><a href="http://www.amibroker.com/kb/comments/feed/" title="The latest comments to all posts in RSS">
Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li> 
</ul>
</div>

</div>

<footer>
<nav>
<ul>
<li>Company
<ul>
<li><a href="http://www.amibroker.com/about.html">About Us</a>
</li><li><a href="http://www.amibroker.com/branding.html">Branding</a>
</li><li><a href="http://www.amibroker.com/terms.html">Terms &amp; Conditions</a>
</li><li><a href="http://www.amibroker.com/privacy.html">Privacy Policy</a>
</li><li><a href="mailto:%61m%69brok%65r.c%6Fm">Email Us &#x2709;</a>
</li></ul>
</li><li>Docs
<ul>
<li><a href="http://www.amibroker.com/features.html">Feature List</a>
</li><li><a href="http://www.amibroker.com/guide/whatsnew.html">What&apos;s New</a>
</li><li><a href="http://www.amibroker.com/guide/">Users&apos; Guide</a>
</li><li><a href="http://www.amibroker.com/guide/h_quotes.html">Data sources</a>
</li><li><a href="http://www.amibroker.com/video/">Videos</a>
</li></ul>
</li><li>Support
<ul>
<li><a href="http://www.amibroker.com/support.html">Tech Support &amp; Sales</a>
</li><li><a href="http://www.amibroker.com/members/">Members&apos; Area</a>
</li><li><a href="http://www.amibroker.com/kb/">Knowledge Base</a>
</li><li><a href="http://www.amibroker.com/devlog/">DevLog</a>
</li><li><a href="http://www.amibroker.org/userkb/">Users&apos; KB</a>
</li></ul>
</li><li>Other
<ul>
<li><a href="http://groups.yahoo.com/neo/groups/amibroker/info">AmiBroker YahooGroup</a>
</li><li><a href="http://www.amibroker.com/links.html">Useful links</a>
</li></ul>
</li></ul>  
</nav>
<div id="bottom"><span>Copyright &#xA9;2016 AmiBroker.com. All rights reserved.</span> 
<p>
<span class="tiny">
This site uses cookies. By browsing this site you agree to our <a href="http://www.amibroker.com/kb/2014/10/12/position-sizing-based-on-risk/privacy.html">privacy &amp; cookies policy</a><br>
Amibroker.com is a software development company and does not provide any kind of investment or brokerage services in financial markets. </span>
</p></div>
</footer>


<link rel="stylesheet" type="text/css" href="http://www.amibroker.com/kb/wp-content/cache/wpfc-minified/ef2f4695c316af897fe6a4855b71dd99/1544491551index.css" media="all">

</body>
</html><!-- WP Fastest Cache file was created in 0.45029783248901 seconds, on 11-12-18 3:50:21 -->